from flask import Flask, request
import smtplib

app = Flask(__name__)

# Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
EMAIL_ADDRESS = "axeracer827@gmail.com"
EMAIL_PASSWORD = "mnpylfwlrktygfjt"  # App Password Ù…Ù† ØºÙˆØºÙ„
TO_EMAIL = "axeracer827@gmail.com"

@app.route('/')
def home():
    # Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²Ø§Ø¦Ø±
    ip = request.remote_addr
    user_agent = request.headers.get('User-Agent')
    lang = request.headers.get('Accept-Language')

    # Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    subject = "ðŸ“© New Visitor on Your Site!"
    body = f"""
    Someone visited your site! ðŸš€

    IP Address: {ip}
    Device Info: {user_agent}
    Language: {lang}
    """
    message = f"Subject: {subject}\n\n{body}"

    # Ù†Ø±Ø³Ù„ Ø¨Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
    try:
        with smtplib.SMTP_SSL("smtp.gmail.com", 465) as server:
            server.login(EMAIL_ADDRESS, EMAIL_PASSWORD)
            server.sendmail(EMAIL_ADDRESS, TO_EMAIL, message)
    except Exception as e:
        print("Error sending email:", e)

    return "<h1>Welcome to My Website ðŸ‘‹</h1><p>Your visit has been recorded.</p>"

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=10000)
